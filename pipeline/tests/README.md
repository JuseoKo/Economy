# Economy 프로젝트의 테스트 전략

## 개요
이 문서는 Economy 프로젝트, 특히 KRX 모듈 테스트에 사용된 테스트 접근 방식을 설명합니다.

## KRX 모듈에 대한 테스트 접근 방식
1. **ETL 컴포넌트 별 단위 테스트**
   - KRX 모듈의 각 클래스는 ETL(Extract, Transform, Load) 패턴을 따릅니다
   - 각 컴포넌트(fetch, transform, load)를 개별적으로 테스트하여 실패를 격리합니다
   - 이 접근 방식은 파이프라인에서 문제가 발생하는 위치를 더 쉽게 식별할 수 있게 합니다

2. **Fixture 사용**
   - 테스트에 샘플 데이터를 제공하기 위해 pytest fixture를 사용합니다
   - 이는 테스트를 DRY(Don't Repeat Yourself) 원칙에 맞게 유지하고 더 유지보수하기 쉽게 만듭니다
   - 샘플 데이터는 KRX의 실제 API 응답을 모방합니다

3. **광범위한 모킹(Mocking)**
   - 외부 의존성(API 호출, 데이터베이스 작업)은 모킹됩니다
   - 이는 테스트를 더 빠르고, 더 신뢰할 수 있으며, 외부 서비스에 독립적으로 만듭니다
   - 모킹을 통해 실제 서비스로는 재현하기 어려운 오류 조건을 테스트할 수 있습니다

4. **통합 테스트**
   - 단위 테스트 외에도 전체 ETL 프로세스를 검증하는 통합 테스트를 포함합니다
   - 이러한 테스트는 컴포넌트가 함께 올바르게 작동하는지 확인합니다
   - ETL 프로세스를 조율하는 `run()` 메서드를 사용합니다

5. **엣지 케이스 테스트**
   - 테스트에는 데이터 변환 검증이 포함됩니다
   - 숫자 값에서 쉼표가 제거되는지 확인합니다
   - 출력에 올바른 열이 있는지 확인합니다

## 테스트 실행 방법

테스트를 실행하려면 프로젝트 루트에서 pytest를 사용하세요:

```bash
pytest tests/
```

특정 모듈에 대한 테스트를 실행하려면:

```bash
pytest tests/pipeline/tasks/stock/test_krx.py
```

## 테스트 유지 관리

KRX 모듈을 변경할 때:

1. 기능 변경 사항을 반영하도록 테스트를 업데이트하세요
2. 새로운 기능에 대한 새 테스트를 추가하세요
3. 기존 기능이 여전히 작동하는지 확인하기 위해 테스트를 실행하세요